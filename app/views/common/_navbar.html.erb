<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/">JDstore</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active">
              <%= link_to("Product", products_path) %>
            </li>
          </ul>

          <!-- 搜索框 -->
           <div class="navbar-form navbar-left">
               <div id="custom-search-input">
                 <%= form_tag search_products_path, :method => :get, :class => "products-search-form"  do %>
                   <div class="input-group col-md-12">
                       <input type="text" class="form-control" name="q" value="<%= params[:q] %>" placeholder="商品，描述...">
                       <span class="input-group-btn">
                           <button class="btn btn-default" type="submit">
                               <i class="fa fa-search" aria-hidden="true"></i>
                           </button>
                       </span>
                   </div>
                 <% end %>
               </div>
           </div>

          <ul class="nav navbar-nav navbar-right">
            <li>
              <%= link_to carts_path do %>
                购物车 <i class="fa fa-shopping-cart"> </i> ( <%= current_cart.products.count %>)
              <% end %>
            </li>
            <% if !current_user %>
              <li><%= link_to(content_tag(:i, '注册', class: 'fa fa-user-circle'), new_user_registration_path) %></li>
              <li><%= link_to(content_tag(:i, '登入', class: 'fa fa-sign-in'), new_user_session_path) %></li>
            <% else %>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    Hi!, <%= current_user.email %>
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                  <% if current_user.admin? %>
                    <li> <%= link_to(content_tag(:i, 'Admin 选单', class: 'fa fa-id-badge'), admin_products_path) %> </li>
                  <% end %>
                  <li> <%= link_to(content_tag(:i, '个人订单列表', class: 'fa fa-list-alt'), account_orders_path) %> </li>
                  <li> <%= link_to(content_tag(:i, '登出', class: 'fa fa-sign-out'), destroy_user_session_path, method: :delete) %> </li>
                </ul>
              </li>
           <% end %>
          </ul>
        </div>
    </div>
</nav>
